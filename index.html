<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AcmeDem | Sign in</title>
    <link rel="shortcut icon" href="img/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/bootstrap.min.css">
    <link rel="stylesheet" href="font/all.min.css">
 
    
</head>
<body >


<style>
    body{
      
        background-image: url(img/titanic-1.jpg);
        background-position: center;
        background-size: cover;
        background-attachment: fixed;
        overflow: hidden;
      
    }

    div#container{
        
       
    
       display: grid;
      
   margin: auto;
       

    }

    form#myform{
        background: rgba(0, 0, 0, 0.5);
        padding: 1rem;
    }
    form#myform input{
        background-color: rgba(0, 0, 0, 0.3);
        border: none;
        color: white;
    }
    form#myform a#btn{
        border: 1px solid #ccc;
        padding: .2rem;
        color:grey;
        text-decoration: none;
        width: 7rem;
    }
   
</style>



<div  class="  container  " id="container">

    <form class="form " id="myform">

        <h1 class="text-center text-light"><i class="fa fa-user "></i></h1>
<h3 id="title" class="text-light text-center">Sign in</h3>
<section class="container text-center w-80">
    <div class="d-sm-flex d-none container px-4 text-center justify-content-between">  
        <a id="btn" href="#"><i class="fab fa-facebook"></i> facebook</a>
        <a id="btn" href="#"><i class="fab fa-google"></i> Google</a>
     
     </div>
</section>
<br>
      <div class="w-100">
       
        <input type="text" id="name" class="form-control " placeholder="User Name">
       <br>
        <input type="number" id="pin" class="form-control" placeholder="User Pin"> 
        

  <a href="#" class="text-light text-center m-auto d-grid mt-3 d-grid btn-success py-1 text-decoration-none   container" id="sign">Sign In</a>
  <br>
  <a href="create.html" class="text-light text-center m-auto d-grid     container">Create new account</a>
      </div>
    </form>

  </div>


  



    
    
        <script src="js/bootstrap.min.js"></script>
        <script src="js/app.js"></script>
      
        <script src="js/all.min.js"></script>
        
     




 
       

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js";
    import { getFirestore, collection, getDocs,doc, setDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyD0qFqSu8ap3PykypuJZoeJ4VcEWKfjHGI",
      authDomain: "movie-67447.firebaseapp.com",
      projectId: "movie-67447",
      storageBucket: "movie-67447.appspot.com",
      messagingSenderId: "11085064442",
      appId: "1:11085064442:web:c26e7405ab1a664ab04143",
      measurementId: "G-6XM58KXE28"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    const data = getFirestore(app);

    
// Get a list of cities from your database
async function GetUsers(db){
  const citiesCol = collection(db, 'users');
  const citySnapshot = await getDocs(citiesCol);
  const cityList = citySnapshot.docs.map(doc => doc.data());
 
return cityList

}



    
var res = await GetUsers(data)

   
/* Add a new document in collection "cities"
await setDoc(doc(data, "users", "LA"), {
  name: 'Benjamin',
  pin: 5555
});   */



///form
var in_name = document.getElementById('name');
var in_pin = document.getElementById('pin');
var form = document.getElementById('myform');
var h3 = document.getElementById('title');

var sign = document.getElementById('sign');

sign.addEventListener('click', e=>{
//get input value
var verify = in_name.value==='' || in_pin.value=== ''

if( verify ){
msg('Enter All Fields!', 'danger', 2000, )
}

else{
msg('Loading...', ' ', 7000);

for(let item of res){
if(item.name== in_name.value && item.pin==in_pin.value){
sign.href= "ind.html"
  window.location.pathname = 'ind.html'
}else{
 h3.textContent = 'User Not Found!!!'
    
  
}

}
}

})

//validation function


function msg(msg, type,time){
var div = document.createElement('div');
div.classList = `p-1 text-light text-center bg-${type}`
div.textContent = msg
form.insertBefore(div,h3)

setTimeout(()=>{
div.remove()
},time)
}



      



           
    

  </script>
  
       
    </body>
    </html>
